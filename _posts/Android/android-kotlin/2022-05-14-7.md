---
layout: single
title: "[Android(Kotlin)] 코루틴(Coroutine) 다시 공부하기 - 3 (취소 및 시간 초과) "
categories: 
    - Android(Kotlin)
tag:
    - [Android, Kotlin, Coroutine]

toc: true
toc_sticky: true
---

<br>

# 코루틴 취소(cancel) 및 시간 초과(timeout)
---
## 코루틴 실행 취소
실행 시간이 긴 애플리케이션에서는 백그라운드 코루틴에 대한 세밀한 제어가 필요할 수 있다. 예를 들어, 사용자가 코루틴을 시작한 페이지를 닫았을 경우 그 결과가 더 이상 필요하지 않아 작업을 취소해야할 수 있다. `launch`는 실행 중인 코루틴을 취소하는 데 사용할 수 있는 `job`을 반환한다.
```kotlin
val job = launch {
    repeat(1000) { i ->
        println("job: I'm sleeping $i ...")
        delay(500L)
    }
}
delay(1300L) // delay a bit
println("main: I'm tired of waiting!")
job.cancel() // cancels the job
job.join() // waits for job's completion 
println("main: Now I can quit.")
```

출력 :
```
job: I'm sleeping 0 ...
job: I'm sleeping 1 ...
job: I'm sleeping 2 ...
main: I'm tired of waiting!
main: Now I can quit.
```

main 함수가 호출되자마자 `job.cancel()`로 인해 코루틴이 취소되었기 때문에 다른 출력을 볼 수 없다. `cancel()`과 `join()`이 결합한 job의 확장 함수 `cancelAndJoin()`도 있다.


